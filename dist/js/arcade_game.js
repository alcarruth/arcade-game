// Generated by CoffeeScript 2.4.1
(function() {
  var Enemy, Engine, Entity, Player, Resources, init,
    boundMethodCheck = function(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new Error('Bound instance method accessed before binding'); } };

  Resources = class Resources {
    constructor() {
      this._load = this._load.bind(this);
      this.load = this.load.bind(this);
      this.get = this.get.bind(this);
      this.isReady = this.isReady.bind(this);
      this.onReady = this.onReady.bind(this);
      this.resourceCache = {};
      this.readyCallbacks = [];
    }

    _load(url) {
      var img;
      if (this.resourceCache[url]) {
        return this.resourceCache[url];
      } else {
        this.resourceCache[url] = void 0;
        img = new Image();
        img.src = url;
        return img.onload = () => {
          this.resourceCache[url] = img;
          if (this.isReady()) {
            return this.readyCallbacks.forEach(function(cb) {
              return cb();
            });
          }
        };
      }
    }

    load(urls) {
      if (urls instanceof Array) {
        return urls.forEach(this._load);
      } else {
        return this._load(urls);
      }
    }

    get(url) {
      return this.resourceCache[url];
    }

    isReady() {
      var _, ready, ref, resource;
      ready = true;
      ref = this.resourceCache;
      for (_ in ref) {
        resource = ref[_];
        ready &= resource != null;
      }
      return ready;
    }

    onReady(cb) {
      return this.readyCallbacks.push(cb);
    }

  };

  Engine = class Engine {
    constructor() {
      /*
       Methods
      */
      this.setPlayer = this.setPlayer.bind(this);
      this.getPlayer = this.getPlayer.bind(this);
      this.addEnemy = this.addEnemy.bind(this);
      this.getEnemies = this.getEnemies.bind(this);
      this.main = this.main.bind(this);
      this.init = this.init.bind(this);
      this.on_keyup = this.on_keyup.bind(this);
      this.update = this.update.bind(this);
      this.render = this.render.bind(this);
      this.numCols = 5;
      this.numRows = 6;
      this.colWidth = 101;
      this.rowHeight = 83;
      this.score = 0;
      this.lives = 10;
      this.score_board = [
        {
          score: document.getElementById("score"),
          lives: document.getElementById("lives")
        }
      ];
      this.canvas = document.createElement('canvas');
      this.ctx = canvas.getContext('2d');
      this.lastTime = null;
      this.enemies = [];
      this.player = null;
      this.rowImages = [
        'images/water-block.png', // Top row is water
        'images/stone-block.png', // Row 1 of 3 of stone
        'images/stone-block.png', // Row 2 of 3 of stone
        'images/stone-block.png', // Row 3 of 3 of stone
        'images/grass-block.png', // Row 1 of 2 of grass
        'images/grass-block.png' // Row 2 of 2 of grass
      ];
      this.resources = window.Resources();
      this.resources.load(['images/stone-block.png', 'images/water-block.png', 'images/grass-block.png', 'images/enemy-bug.png', 'images/char-boy.png']);
      this.resources.onReady(init);
      this.canvas.width = numCols * colWidth;
      this.canvas.height = numRows * rowHeight + 100;
      this.document.body.appendChild(canvas);
      this.document.addEventListener('on_keyup', this.on_keyup);
    }

    setPlayer(p) {
      return this.player = p;
    }

    getPlayer() {
      return this.player;
    }

    addEnemy(e) {
      return this.enemies.push(e);
    }

    getEnemies() {
      return this.enemies;
    }

    main() {
      var dt, now;
      now = Date.now();
      dt = (now - lastTime) / 1000.0;
      this.update(dt);
      this.render();
      this.lastTime = now;
      return window.requestAnimationFrame(this.main);
    }

    init() {
      this.reset();
      this.lastTime = Date.now();
      return this.main();
    }

    on_keyup(e) {
      var direction;
      direction = {
        37: 'left',
        38: 'up',
        39: 'right',
        40: 'down'
      }[e.keyCode];
      return this.player.handleInput(direction);
    }

    update(dt) {
      var enemy, i, j, len, len1, ref, ref1;
      ref = this.enemies;
      // update enemies
      for (i = 0, len = ref.length; i < len; i++) {
        enemy = ref[i];
        enemy.update(dt);
      }
      
      // update player
      this.player.update();
      ref1 = this.enemies;
      // check for collisions
      for (j = 0, len1 = ref1.length; j < len1; j++) {
        enemy = ref1[j];
        if (enemy.collision(this.player)) {
          this.player.reset();
          this.lives--;
          this.score_board.lives.innerHTML = 'Lives: ' + this.lives;
        }
      }
      // check for success
      if (this.player.y < 0) {
        this.score++;
        this.score_board.score.innerHTML = 'Score: ' + this.score;
        return this.player.reset();
      }
    }

    render() {
      var col, i, img, j, ref, ref1, row;
// render the background
      for (row = i = 0, ref = this.numRows; (0 <= ref ? i < ref : i > ref); row = 0 <= ref ? ++i : --i) {
        img = resources.get(this.rowImages[row]);
        for (col = j = 0, ref1 = this.numCols; (0 <= ref1 ? j < ref1 : j > ref1); col = 0 <= ref1 ? ++j : --j) {
          ctx.drawImage(img, col * this.colWidth, row * this.rowHeight);
        }
      }
      // render the enemies
      this.enemies.forEach(function(enemy) {
        return enemy.render();
      });
      // render the player
      return this.player.render();
    }

    reset() {} // noop

  };

  Entity = class Entity {
    constructor(engine, init_x, init_y, sprite) {
      this.reset = this.reset.bind(this);
      this.render = this.render.bind(this);
      this.x = init_x;
      this.y = init_y;
      this.engine = engine;
      this.numCols = engine.numCols;
      this.numRows = engine.numRows;
      this.colWidth = engine.colWidth;
      this.rowHeight = engine.rowHeight;
      this.ctx = engine.ctx;
      this.resources = engine.resources;
      this.init_x = init_x;
      this.init_y = init_y;
      this.sprite = sprite;
      this.reset();
    }

    reset() {
      this.x = this.init_x;
      return this.y = this.init_y;
    }

    render() {
      var img;
      img = this.resources.get(this.sprite);
      return this.ctx.drawImage(img, this.x, this.y);
    }

  };

  Enemy = class Enemy extends Entity {
    constructor(engine, row, speed, sprite) {
      var offset, x_init, y_init;
      // some of the images are taller than the rows
      // so I tweaked it here.
      offset = -20;
      x_init = -engine.colWidth;
      y_init = (engine.numRows - row - 1) * engine.rowHeight + offset;
      super(engine, x_init, y_init, sprite);
      this.collision = this.collision.bind(this);
      this.update = this.update.bind(this);
      // speed is 1 (min) .. 10 (max).
      this.speed = speed;
    }

    collision() {
      var collision, x_max, x_min, y_max, y_min;
      boundMethodCheck(this, Enemy);
      x_min = Math.floor(this.x / this.colWidth) * this.colWidth;
      x_max = x_min + 2 * this.colWidth;
      y_min = Math.floor(this.y / this.rowHeight) * this.rowHeight;
      y_max = y_min + this.rowHeight;
      collision = entity.x >= x_min && entity.x < x_max && entity.y >= y_min && entity.y < y_max;
      return collision;
    }

    update(dt) {
      var dx;
      boundMethodCheck(this, Enemy);
      // reset if at right edge
      if (this.x >= this.numCols * this.colWidth) {
        return this.reset();
      } else {
        // otherwise increase x position appropriately
        dx = this.speed / 5 * dt * this.colWidth;
        return this.x = this.x + dx;
      }
    }

  };

  Player = (function() {
    class Player extends Entity {
      constructor(engine, sprite) {
        var col, offset, row, x_init, y_init;
        // start on the bottom row
        row = 1;
        // in the middle column
        col = (engine.numCols + 1) / 2;
        // some of the images are taller than the rows
        // so I tweaked it here.
        offset = -10;
        x_init = (col - 1) * engine.colWidth;
        y_init = (engine.numRows - row) * engine.rowHeight + offset;
        super(engine, x_init, y_init, sprite);
        this.update = this.update.bind(this);
        this.handleInput = this.handleInput.bind(this);
        this.move_left = this.move_left.bind(this);
        this.move_up = this.move_up.bind(this);
        this.move_down = this.move_down.bind(this);
      }

      update(dt) {
        boundMethodCheck(this, Player);
        return dt = dt;
      }

      handleInput(direction) {
        var move;
        boundMethodCheck(this, Player);
        move = {
          left: this.move_left,
          right: this.move_right,
          up: this.move_up,
          down: this.move_down
        }[direction];
        return move();
      }

      move_left() {
        boundMethodCheck(this, Player);
        if (this.x > 0) {
          return this.x -= this.colWidth;
        }
      }

      move_up() {
        boundMethodCheck(this, Player);
        if (this.y >= this.rowHeight) {
          return this.y -= this.rowHeight;
        } else if (this.y > 0) {
          return this.y -= this.rowHeight;
        } else {
          return this.reset();
        }
      }

      move_down() {
        boundMethodCheck(this, Player);
        // why minus 2 ? 
        if (this.y < (this.numRows - 2) * this.rowHeight) {
          return this.y += this.rowHeight;
        }
      }

    };

    Player.prototype.move_right = (Player.x < (Player.numCols - 1) * Player.colWidth) ? Player.x += Player.colWidth : void 0;

    return Player;

  }).call(this);

  init = function() {
    var engine;
    engine = new Engine();
    /*  Create a new Player object */
    engine.setPlayer(new Player(engine, "images/char-boy.png"));
    /*  Create several Enemy objects */
    engine.addEnemy(new Enemy(engine, 3, 8, 'images/enemy-bug.png'));
    engine.addEnemy(new Enemy(engine, 4, 7, 'images/enemy-bug.png'));
    engine.addEnemy(new Enemy(engine, 2, 5, 'images/enemy-bug.png'));
    return window.app = engine;
  };

  if (document.readyState === 'complete') {
    init();
  } else {
    document.onreadystatechange(function() {
      if (document.readyState === 'complete') {
        return init();
      }
    });
  }

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXJjYWRlX2dhbWUuanMiLCJzb3VyY2VSb290IjoiLi4vLi4iLCJzb3VyY2VzIjpbImJ1aWxkL2FyY2FkZV9nYW1lLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBRUE7QUFBQSxNQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsSUFBQTtJQUFBOztFQUFNLFlBQU4sTUFBQSxVQUFBO0lBRUUsV0FBYSxDQUFBLENBQUE7VUFJYixDQUFBLFlBQUEsQ0FBQTtVQVlBLENBQUEsV0FBQSxDQUFBO1VBTUEsQ0FBQSxVQUFBLENBQUE7VUFHQSxDQUFBLGNBQUEsQ0FBQTtVQU1BLENBQUEsY0FBQSxDQUFBO01BOUJFLElBQUMsQ0FBQSxhQUFELEdBQWlCLENBQUE7TUFDakIsSUFBQyxDQUFBLGNBQUQsR0FBa0I7SUFGUDs7SUFJYixLQUFPLENBQUMsR0FBRCxDQUFBO0FBQ0wsVUFBQTtNQUFBLElBQUcsSUFBQyxDQUFBLGFBQWMsQ0FBQSxHQUFBLENBQWxCO0FBQ0UsZUFBTyxJQUFDLENBQUEsYUFBYyxDQUFBLEdBQUEsRUFEeEI7T0FBQSxNQUFBO1FBR0UsSUFBQyxDQUFBLGFBQWMsQ0FBQSxHQUFBLENBQWYsR0FBc0I7UUFDdEIsR0FBQSxHQUFNLElBQUksS0FBSixDQUFBO1FBQ04sR0FBRyxDQUFDLEdBQUosR0FBVTtlQUNWLEdBQUcsQ0FBQyxNQUFKLEdBQWEsQ0FBQSxDQUFBLEdBQUE7VUFDWCxJQUFDLENBQUEsYUFBYyxDQUFBLEdBQUEsQ0FBZixHQUFzQjtVQUN0QixJQUFHLElBQUMsQ0FBQSxPQUFELENBQUEsQ0FBSDttQkFDRSxJQUFDLENBQUEsY0FBYyxDQUFDLE9BQWhCLENBQXdCLFFBQUEsQ0FBQyxFQUFELENBQUE7cUJBQVEsRUFBQSxDQUFBO1lBQVIsQ0FBeEIsRUFERjs7UUFGVyxFQU5mOztJQURLOztJQVlQLElBQU0sQ0FBQyxJQUFELENBQUE7TUFDSixJQUFJLElBQUEsWUFBZ0IsS0FB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QUVBLE1BQU0sQ0FBQyxHQUFQLEdBQWE7RUFaUjs7RUFlUCxJQUFHLFFBQVEsQ0FBQyxVQUFULEtBQXVCLFVBQTFCO0lBQ0UsSUFBQSxDQUFBLEVBREY7R0FBQSxNQUFBO0lBR0UsUUFBUSxDQUFDLGtCQUFULENBQTZCLFFBQUEsQ0FBQSxDQUFBO01BQzNCLElBQUcsUUFBUSxDQUFDLFVBQVQsS0FBdUIsVUFBMUI7ZUFDRSxJQUFBLENBQUEsRUFERjs7SUFEMkIsQ0FBN0IsRUFIRjs7QUEvUkEiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuY2xhc3MgUmVzb3VyY2VzXG5cbiAgY29uc3RydWN0b3I6IC0+XG4gICAgQHJlc291cmNlQ2FjaGUgPSB7fVxuICAgIEByZWFkeUNhbGxiYWNrcyA9IFtdXG5cbiAgX2xvYWQ6ICh1cmwpID0+XG4gICAgaWYgQHJlc291cmNlQ2FjaGVbdXJsXVxuICAgICAgcmV0dXJuIEByZXNvdXJjZUNhY2hlW3VybF1cbiAgICBlbHNlIFxuICAgICAgQHJlc291cmNlQ2FjaGVbdXJsXSA9IHVuZGVmaW5lZFxuICAgICAgaW1nID0gbmV3IEltYWdlKClcbiAgICAgIGltZy5zcmMgPSB1cmxcbiAgICAgIGltZy5vbmxvYWQgPSA9PlxuICAgICAgICBAcmVzb3VyY2VDYWNoZVt1cmxdID0gaW1nXG4gICAgICAgIGlmIEBpc1JlYWR5KClcbiAgICAgICAgICBAcmVhZHlDYWxsYmFja3MuZm9yRWFjaCgoY2IpIC0+IGNiKCkpXG5cbiAgbG9hZDogKHVybHMpID0+XG4gICAgaWYgKHVybHMgaW5zdGFuY2VvZiBBcnJheSlcbiAgICAgIHVybHMuZm9yRWFjaChAX2xvYWQpXG4gICAgZWxzZSBcbiAgICAgIEBfbG9hZCh1cmxzKVxuXG4gIGdldDogKHVybCkgPT5cbiAgICBAcmVzb3VyY2VDYWNoZVt1cmxdXG5cbiAgaXNSZWFkeTogPT5cbiAgICByZWFkeSA9IHRydWVcbiAgICBmb3IgXyxyZXNvdXJjZSBvZiBAcmVzb3VyY2VDYWNoZVxuICAgICAgcmVhZHkgJj0gcmVzb3VyY2U/XG4gICAgcmV0dXJuIHJlYWR5XG5cbiAgb25SZWFkeTogKGNiKSA9PlxuICAgIEByZWFkeUNhbGxiYWNrcy5wdXNoKGNiKVxuXG5cblxuY2xhc3MgRW5naW5lXG5cbiAgY29uc3RydWN0b3I6IC0+XG4gICAgQG51bUNvbHMgPSA1XG4gICAgQG51bVJvd3MgPSA2XG4gICAgQGNvbFdpZHRoID0gMTAxXG4gICAgQHJvd0hlaWdodCA9IDgzXG4gICAgQHNjb3JlID0gMFxuICAgIEBsaXZlcyA9IDEwXG5cbiAgICBAc2NvcmVfYm9hcmQgPSBbXG4gICAgICBzY29yZTogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY29yZVwiKVxuICAgICAgbGl2ZXM6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGl2ZXNcIilcbiAgICBdXG4gICAgQGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpXG4gICAgQGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpXG4gICAgQGxhc3RUaW1lID0gbnVsbFxuICAgIEBlbmVtaWVzID0gW11cbiAgICBAcGxheWVyID0gbnVsbFxuXG4gICAgQHJvd0ltYWdlcyA9IFtcbiAgICAgICdpbWFnZXMvd2F0ZXItYmxvY2sucG5nJywgICAjIFRvcCByb3cgaXMgd2F0ZXJcbiAgICAgICdpbWFnZXMvc3RvbmUtYmxvY2sucG5nJywgICAjIFJvdyAxIG9mIDMgb2Ygc3RvbmVcbiAgICAgICdpbWFnZXMvc3RvbmUtYmxvY2sucG5nJywgICAjIFJvdyAyIG9mIDMgb2Ygc3RvbmVcbiAgICAgICdpbWFnZXMvc3RvbmUtYmxvY2sucG5nJywgICAjIFJvdyAzIG9mIDMgb2Ygc3RvbmVcbiAgICAgICdpbWFnZXMvZ3Jhc3MtYmxvY2sucG5nJywgICAjIFJvdyAxIG9mIDIgb2YgZ3Jhc3NcbiAgICAgICdpbWFnZXMvZ3Jhc3MtYmxvY2sucG5nJyAgICAjIFJvdyAyIG9mIDIgb2YgZ3Jhc3NcbiAgICBdXG4gICAgQHJlc291cmNlcyA9IHdpbmRvdy5SZXNvdXJjZXMoKVxuICAgIEByZXNvdXJjZXMubG9hZChbXG4gICAgICAnaW1hZ2VzL3N0b25lLWJsb2NrLnBuZycsXG4gICAgICAnaW1hZ2VzL3dhdGVyLWJsb2NrLnBuZycsXG4gICAgICAnaW1hZ2VzL2dyYXNzLWJsb2NrLnBuZycsXG4gICAgICAnaW1hZ2VzL2VuZW15LWJ1Zy5wbmcnLFxuICAgICAgJ2ltYWdlcy9jaGFyLWJveS5wbmcnXG4gICAgXSlcbiAgICBAcmVzb3VyY2VzLm9uUmVhZHkoaW5pdClcbiAgICBAY2FudmFzLndpZHRoID0gbnVtQ29scyAqIGNvbFdpZHRoXG4gICAgQGNhbnZhcy5oZWlnaHQgPSBudW1Sb3dzICogcm93SGVpZ2h0ICsgMTAwXG4gICAgQGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKVxuICAgIEBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdvbl9rZXl1cCcsIEBvbl9rZXl1cClcblxuXG4gICMjI1xuICAgTWV0aG9kc1xuICAjIyNcblxuICBzZXRQbGF5ZXI6IChwKSA9PiBAcGxheWVyID0gcFxuICBnZXRQbGF5ZXI6ID0+IEBwbGF5ZXJcblxuICBhZGRFbmVteTogKGUpID0+IEBlbmVtaWVzLnB1c2goZSlcbiAgZ2V0RW5lbWllczogPT4gQGVuZW1pZXNcblxuICBtYWluOiA9PlxuICAgIG5vdyA9IERhdGUubm93KClcbiAgICBkdCA9IChub3cgLSBsYXN0VGltZSkgLyAxMDAwLjBcbiAgICBAdXBkYXRlKGR0KVxuICAgIEByZW5kZXIoKVxuICAgIEBsYXN0VGltZSA9IG5vd1xuICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoQG1haW4pXG5cbiAgaW5pdDogPT5cbiAgICBAcmVzZXQoKVxuICAgIEBsYXN0VGltZSA9IERhdGUubm93KClcbiAgICBAbWFpbigpXG5cbiAgb25fa2V5dXA6IChlKSA9PlxuICAgIGRpcmVjdGlvbiA9ICB7XG4gICAgICAzNzogJ2xlZnQnXG4gICAgICAzODogJ3VwJ1xuICAgICAgMzk6ICdyaWdodCdcbiAgICAgIDQwOiAnZG93bidcbiAgICAgIH1bZS5rZXlDb2RlXVxuICAgIEBwbGF5ZXIuaGFuZGxlSW5wdXQoZGlyZWN0aW9uKVxuXG4gIHVwZGF0ZTogKGR0KSA9PlxuXG4gICAgIyB1cGRhdGUgZW5lbWllc1xuICAgIGZvciBlbmVteSBpbiBAZW5lbWllc1xuICAgICAgZW5lbXkudXBkYXRlKGR0KVxuICAgICAgXG4gICAgIyB1cGRhdGUgcGxheWVyXG4gICAgQHBsYXllci51cGRhdGUoKVxuXG4gICAgIyBjaGVjayBmb3IgY29sbGlzaW9uc1xuICAgIGZvciBlbmVteSBpbiBAZW5lbWllc1xuICAgICAgaWYgKGVuZW15LmNvbGxpc2lvbihAcGxheWVyKSlcbiAgICAgICAgQHBsYXllci5yZXNldCgpXG4gICAgICAgIEBsaXZlcy0tXG4gICAgICAgIEBzY29yZV9ib2FyZC5saXZlcy5pbm5lckhUTUwgPSAnTGl2ZXM6ICcgKyBAbGl2ZXNcblxuICAgICMgY2hlY2sgZm9yIHN1Y2Nlc3NcbiAgICBpZiAoQHBsYXllci55IDwgMCkgXG4gICAgICBAc2NvcmUrK1xuICAgICAgQHNjb3JlX2JvYXJkLnNjb3JlLmlubmVySFRNTCA9ICdTY29yZTogJyArIEBzY29yZVxuICAgICAgQHBsYXllci5yZXNldCgpXG5cblxuICByZW5kZXI6ID0+XG5cbiAgICAjIHJlbmRlciB0aGUgYmFja2dyb3VuZFxuICAgIGZvciByb3cgaW4gWzAuLi5AbnVtUm93c11cbiAgICAgIGltZyA9IHJlc291cmNlcy5nZXQoQHJvd0ltYWdlc1tyb3ddKVxuICAgICAgZm9yIGNvbCBpbiBbMC4uLkBudW1Db2xzXVxuICAgICAgICBjdHguZHJhd0ltYWdlKGltZywgY29sICogQGNvbFdpZHRoLCByb3cgKiBAcm93SGVpZ2h0KVxuXG4gICAgIyByZW5kZXIgdGhlIGVuZW1pZXNcbiAgICBAZW5lbWllcy5mb3JFYWNoKCAoZW5lbXkpIC0+IGVuZW15LnJlbmRlcigpKVxuXG4gICAgIyByZW5kZXIgdGhlIHBsYXllclxuICAgIEBwbGF5ZXIucmVuZGVyKClcblxuXG4gIHJlc2V0OiAtPiAgIyBub29wXG5cblxuXG5jbGFzcyBFbnRpdHlcblxuICBjb25zdHJ1Y3RvcjogKGVuZ2luZSwgaW5pdF94LCBpbml0X3ksIHNwcml0ZSkgLT5cbiAgICBAeCA9IGluaXRfeFxuICAgIEB5ID0gaW5pdF95XG4gICAgQGVuZ2luZSA9IGVuZ2luZVxuICAgIEBudW1Db2xzID0gZW5naW5lLm51bUNvbHNcbiAgICBAbnVtUm93cyA9IGVuZ2luZS5udW1Sb3dzXG4gICAgQGNvbFdpZHRoID0gZW5naW5lLmNvbFdpZHRoXG4gICAgQHJvd0hlaWdodCA9IGVuZ2luZS5yb3dIZWlnaHRcbiAgICBAY3R4ID0gZW5naW5lLmN0eFxuICAgIEByZXNvdXJjZXMgPSBlbmdpbmUucmVzb3VyY2VzXG5cbiAgICBAaW5pdF94ID0gaW5pdF94XG4gICAgQGluaXRfeSA9IGluaXRfeVxuICAgIEBzcHJpdGUgPSBzcHJpdGVcbiAgICBAcmVzZXQoKVxuXG4gIHJlc2V0OiA9PlxuICAgIEB4ID0gQGluaXRfeFxuICAgIEB5ID0gQGluaXRfeVxuXG4gIHJlbmRlcjogPT5cbiAgICBpbWcgPSBAcmVzb3VyY2VzLmdldChAc3ByaXRlKVxuICAgIEBjdHguZHJhd0ltYWdlKGltZywgQHgsIEB5KVxuXG5cbmNsYXNzIEVuZW15IGV4dGVuZHMgRW50aXR5XG5cbiAgY29uc3RydWN0b3I6IChlbmdpbmUsIHJvdywgc3BlZWQsIHNwcml0ZSkgLT5cblxuICAgICMgc29tZSBvZiB0aGUgaW1hZ2VzIGFyZSB0YWxsZXIgdGhhbiB0aGUgcm93c1xuICAgICMgc28gSSB0d2Vha2VkIGl0IGhlcmUuXG4gICAgb2Zmc2V0ID0gLTIwXG4gICAgeF9pbml0ID0gLWVuZ2luZS5jb2xXaWR0aFxuICAgIHlfaW5pdCA9IChlbmdpbmUubnVtUm93cy1yb3ctMSkgKiBlbmdpbmUucm93SGVpZ2h0ICsgb2Zmc2V0XG4gICAgc3VwZXIoZW5naW5lLCB4X2luaXQsIHlfaW5pdCwgc3ByaXRlKVxuXG4gICAgIyBzcGVlZCBpcyAxIChtaW4pIC4uIDEwIChtYXgpLlxuICAgIEBzcGVlZCA9IHNwZWVkXG5cbiAgY29sbGlzaW9uOiA9PlxuICAgIHhfbWluID0gTWF0aC5mbG9vcihAeC9AY29sV2lkdGgpICogQGNvbFdpZHRoXG4gICAgeF9tYXggPSB4X21pbiArIDIgKiBAY29sV2lkdGhcbiAgICB5X21pbiA9IE1hdGguZmxvb3IoQHkvQHJvd0hlaWdodCkgKiBAcm93SGVpZ2h0XG4gICAgeV9tYXggPSB5X21pbiArIEByb3dIZWlnaHRcbiAgICBjb2xsaXNpb24gPSBcbiAgICAgIGVudGl0eS54ID49IHhfbWluICYmXG4gICAgICBlbnRpdHkueCA8ICB4X21heCAmJlxuICAgICAgZW50aXR5LnkgPj0geV9taW4gJiZcbiAgICAgIGVudGl0eS55IDwgIHlfbWF4XG4gICAgcmV0dXJuIGNvbGxpc2lvblxuXG4gIHVwZGF0ZTogKGR0KSA9PlxuICAgICMgcmVzZXQgaWYgYXQgcmlnaHQgZWRnZVxuICAgIGlmIChAeCA+PSBAbnVtQ29scyAqIEBjb2xXaWR0aCkgXG4gICAgICBAcmVzZXQoKVxuXG4gICAgIyBvdGhlcndpc2UgaW5jcmVhc2UgeCBwb3NpdGlvbiBhcHByb3ByaWF0ZWx5XG4gICAgZWxzZSBcbiAgICAgIGR4ID0gQHNwZWVkLzUgKiBkdCAqIEBjb2xXaWR0aFxuICAgICAgQHggPSBAeCArIGR4XG5cblxuXG5jbGFzcyBQbGF5ZXIgZXh0ZW5kcyBFbnRpdHlcblxuICBjb25zdHJ1Y3RvcjogKGVuZ2luZSwgc3ByaXRlKSAtPlxuICAgICMgc3RhcnQgb24gdGhlIGJvdHRvbSByb3dcbiAgICByb3cgPSAxXG4gICAgIyBpbiB0aGUgbWlkZGxlIGNvbHVtblxuICAgIGNvbCA9IChlbmdpbmUubnVtQ29scysxKS8yXG5cbiAgICAjIHNvbWUgb2YgdGhlIGltYWdlcyBhcmUgdGFsbGVyIHRoYW4gdGhlIHJvd3NcbiAgICAjIHNvIEkgdHdlYWtlZCBpdCBoZXJlLlxuICAgIG9mZnNldCA9IC0xMFxuICAgIHhfaW5pdCA9IChjb2wtMSkgKiBlbmdpbmUuY29sV2lkdGhcbiAgICB5X2luaXQgPSAoZW5naW5lLm51bVJvd3Mtcm93KSAqIGVuZ2luZS5yb3dIZWlnaHQgKyBvZmZzZXRcblxuICAgIHN1cGVyKGVuZ2luZSwgeF9pbml0LCB5X2luaXQsIHNwcml0ZSlcblxuXG4gIHVwZGF0ZTogKGR0KSA9PlxuICAgIGR0ID0gZHRcblxuICBoYW5kbGVJbnB1dDogKGRpcmVjdGlvbikgPT5cbiAgICBtb3ZlID0ge1xuICAgICAgbGVmdDogQG1vdmVfbGVmdFxuICAgICAgcmlnaHQ6IEBtb3ZlX3JpZ2h0XG4gICAgICB1cDogQG1vdmVfdXBcbiAgICAgIGRvd246IEBtb3ZlX2Rvd25cbiAgICAgIH1bZGlyZWN0aW9uXVxuICAgIG1vdmUoKVxuXG4gIG1vdmVfbGVmdDogPT5cbiAgICBpZiAoQHggPiAwKVxuICAgICAgQHggLT0gQGNvbFdpZHRoXG5cbiAgbW92ZV9yaWdodDpcbiAgICBpZiAoQHggPCAoQG51bUNvbHMtMSkgKiBAY29sV2lkdGgpXG4gICAgICBAeCArPSBAY29sV2lkdGhcblxuICBtb3ZlX3VwOiA9PlxuICAgIGlmIChAeSA+PSBAcm93SGVpZ2h0KSBcbiAgICAgIEB5IC09IEByb3dIZWlnaHRcbiAgICBlbHNlIGlmIChAeSA+IDApIFxuICAgICAgQHkgLT0gQHJvd0hlaWdodFxuICAgIGVsc2UgXG4gICAgICBAcmVzZXQoKVxuXG4gIG1vdmVfZG93bjogPT5cbiAgICAjIHdoeSBtaW51cyAyID8gXG4gICAgaWYgKEB5IDwgKEBudW1Sb3dzIC0gMikgKiBAcm93SGVpZ2h0KSBcbiAgICAgIEB5ICs9IEByb3dIZWlnaHRcblxuICAgIFxuXG5pbml0ID0gLT5cblxuICBlbmdpbmUgPSBuZXcgRW5naW5lKClcbiAgXG4gICMjIyAgQ3JlYXRlIGEgbmV3IFBsYXllciBvYmplY3QgIyMjXG4gIGVuZ2luZS5zZXRQbGF5ZXIobmV3IFBsYXllcihlbmdpbmUsIFwiaW1hZ2VzL2NoYXItYm95LnBuZ1wiKSlcblxuICAjIyMgIENyZWF0ZSBzZXZlcmFsIEVuZW15IG9iamVjdHMgIyMjXG4gIGVuZ2luZS5hZGRFbmVteShuZXcgRW5lbXkoZW5naW5lLCAzLCA4LCAnaW1hZ2VzL2VuZW15LWJ1Zy5wbmcnKSlcbiAgZW5naW5lLmFkZEVuZW15KG5ldyBFbmVteShlbmdpbmUsIDQsIDcsICdpbWFnZXMvZW5lbXktYnVnLnBuZycpKVxuICBlbmdpbmUuYWRkRW5lbXkobmV3IEVuZW15KGVuZ2luZSwgMiwgNSwgJ2ltYWdlcy9lbmVteS1idWcucG5nJykpXG5cbiAgd2luZG93LmFwcCA9IGVuZ2luZVxuXG5cbmlmIGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJ1xuICBpbml0KClcbmVsc2VcbiAgZG9jdW1lbnQub25yZWFkeXN0YXRlY2hhbmdlKCAtPlxuICAgIGlmIGRvY3VtZW50LnJlYWR5U3RhdGUgPT0gJ2NvbXBsZXRlJ1xuICAgICAgaW5pdCgpKVxuXG5cbiJdfQ==
//# sourceURL=/usr/local/server/git/repos/Programming_Projects/udacity/frontend-nanodegree/projects/p3-arcade-game/build/arcade_game.coffee